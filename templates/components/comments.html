<section class="comments-section mt-5">
  <h2 class="comments-title">Reader Comments <span class="comments-count">({{ comments|length }})</span></h2>

  <!-- Existing comments -->
  <div class="comments-list">
    {% if comments %}
      {% for comment in comments %}
        <article class="comment-card">
          <div class="comment-header">
            <strong class="comment-author">{{ comment.user.username }}</strong>
            <span class="comment-date">{{ comment.created_at|date:"M d, Y H:i" }}</span>
          </div>
          <p class="comment-text">{{ comment.text }}</p>
        </article>
      {% endfor %}
    {% else %}
      <div class="no-comments">No comments yet. Be the first to comment!</div>
    {% endif %}
  </div>

  <!-- Comment form -->
  <div class="comment-form-wrap">
    {% if user.is_authenticated %}
    <form method="post" class="comment-form">
      {% csrf_token %}
      <textarea name="text" rows="4" class="comment-input" placeholder="Write your comment..." required></textarea>

      <div class="comment-actions">
        <button type="submit" class="btn btn-primary comment-submit">Post Comment</button>
      </div>
    </form>
    {% else %}
    <p class="must-login">
      You must <a href="{% url 'login' %}" class="link-login">log in</a> to leave a comment.
    </p>
    {% endif %}
  </div>
</section>
